max v2;#N vpatcher 353 44 899 870;#P origin 0 3;#P window setfont "Sans Serif" 9.;#P message 229 788 40 196617 msd3D;#P message 187 788 40 196617 msd2D;#P hidden newex 171 809 64 196617 prepend help;#P hidden newex 171 832 45 196617 pcontrol;#P user multiSlider 258 146 106 150 0. 127. 4 2665 47 0 1 4 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P newex 258 325 49 196617 s msd-in;#N vpatcher 131 71 448 305;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P message 72 100 91 196617 bang \, massesPosL;#P newex 72 69 52 196617 metro 20;#P inlet 72 38 15 0;#P window linecount 1;#P newex 72 131 49 196617 s msd-in;#P connect 1 0 2 0;#P connect 2 0 3 0;#P connect 3 0 0 0;#P pop;#P newobj 17 233 84 196617 patcher compute;#P button 17 122 24 0;#N vpatcher 220 222 710 581;#P inlet 72 38 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 72 289 49 196617 s msd-in;#P message 72 202 94 196617 Xmax 127 \, Xmin 0;#P message 103 181 300 196617 link souple 1 0 1 0.5 \, link souple 1 2 1 0.5 \, link souple 3 2 1 0.5;#P message 134 160 255 196617 mass mob 1 10 0 \, mass mob 1 10 0 \, mass mob 1 10 0;#P window linecount 0;#P message 165 139 82 196617 mass fix 0 10 0;#P message 196 118 34 196617 reset;#P newex 72 97 136 196617 b 5;#P newex 72 64 48 196617 loadbang;#P connect 8 0 0 0;#P connect 0 0 1 0;#P connect 1 0 6 0;#P connect 2 0 7 0;#P connect 3 0 7 0;#P connect 4 0 7 0;#P connect 5 0 7 0;#P connect 6 0 7 0;#P connect 1 1 5 0;#P connect 1 2 4 0;#P connect 1 3 3 0;#P connect 1 4 2 0;#P pop;#P newobj 17 156 62 196617 patcher init;#N vpatcher 26 102 801 574;#P origin 24 1;#P user panel 0 261 757 14;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P window setfont "Sans Serif" 10.;#P window linecount 1;#P comment 7 178 310 196618 Be careful : if masses are deleted \, lists messages won't work;#P window linecount 7;#P comment 7 79 292 196618 It is designed to implement particules physical model in PD and Max/MSP.The model is based on two elements type : mass and link. The msd masses are the principals objects of the model. They got only one physical parameter \, the value of their mass. They can be mobile or fixed \, in this case forces applied on them automatically \, by links \, or manually \, by messages \, don't do anything.;#P window linecount 2;#P comment 7 50 247 196618 MSD is the 1D object of the msd objects collection.;#P window setfont "Sans Serif" 12.;#P window linecount 0;#P comment 468 20 126 196620 The equations are :;#P window setfont "Sans Serif" 10.;#P comment 451 53 142 196618 if Lmin<|L[n]-L[0]|<Lmax;#P comment 450 92 29 196618 else;#P comment 450 112 129 196618 F[n] = D(L[n]-L[n-1]);#P comment 450 71 238 196618 F[n] = K(L[n] - L[0])^P + D(L[n] - L[n-1]);#P comment 7 197 273 196618 Links connect masses two by two. They got 4 physicals parameters : length \, rigidity \, damping and power.;#P comment 7 226 370 196618 Rigidity \, damping and power are defined by the creation message. The lenght is initialised to the distance between the two masses at the creation.;#P window setfont "Sans Serif" 12.;#P comment 16 20 226 196620 MSD : mass - spring - damper model;#P user panel 383 0 13 272;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P pop;#P newobj 16 787 101 196617 patcher More_Info;#P window setfont "Sans Serif" 12.;#P comment 12 73 70 196620 Examples:;#P comment 9 370 47 196620 Inlets:;#P window setfont "Sans Serif" 10.;#P comment 20 396 42 196618 - Left:;#P window setfont "Sans Serif" 12.;#P comment 10 527 81 196620 Arguments:;#P comment 11 563 58 196620 Outlets:;#P comment 19 730 66 196620 See Also:;#P window setfont "Sans Serif" 10.;#P comment 74 49 62 196618 Full Name:;#P window setfont "Sans Serif" 12.;#P comment 12 6 73 196620 HELP: msd;#P window setfont "Sans Serif" 10.;#P newex 157 49 29 196618 msd;#P window setfont "Sans Serif" 12.;#P comment 12 22 361 196620 DESCRIPTION: Mass spring damper physical modeling in 1D.;#P window setfont "Sans Serif" 9.;#P newex 18 297 29 196617 msd;#P newex 18 322 59 196617 s msd-out;#P newex 18 273 55 196617 r msd-in;#P message 258 304 66 196617 posX fix \$1;#P toggle 17 201 20 0;#P newex 258 98 55 196617 r msd-out;#P newex 258 122 96 196617 route massesPosL;#P window setfont "Sans Serif" 10.;#P window linecount 2;#P comment 101 389 215 196618 Bang - A bang at the left inlet compute the new model state based on previous instant.;#P window linecount 1;#P comment 158 479 219 196618 To set the model parameters after creation.;#P comment 158 457 190 196618 To create the model masses and links.;#P comment 158 502 146 196618 To get the model parameters;#P window setfont "Sans Serif" 9.;#N vpatcher 33 254 578 833;#P origin 0 2;#P window setfont "Sans Serif" 12.;#P comment 7 10 131 196620 CREATION Messages;#P window setfont "Sans Serif" 10.;#P message 32 112 35 196618 reset;#P comment 202 175 61 196618 Add a mass;#P comment 288 176 92 196618 \$1 : Id (symbol);#P comment 287 196 142 196618 \$2 : fixed or mobile (0/1);#P comment 287 214 57 196618 \$3 : mass;#P message 32 175 102 196618 mass \$1 \$2 \$3 \$4;#P message 32 251 79 196618 deleteMass \$1;#P comment 201 253 173 196618 Delete a mass and associated links;#P comment 285 270 128 196618 \$1 : Creation No of mass;#P comment 287 232 106 196618 \$4 : initial position;#P window setfont "Sans Serif" 12.;#P comment 7 145 62 196620 Masses :;#P comment 7 82 53 196620 Reset :;#P window setfont "Sans Serif" 10.;#P comment 129 113 236 196618 Delete all masses \, links and internal variables;#P window setfont "Sans Serif" 12.;#P comment 6 316 49 196620 Links :;#P window setfont "Sans Serif" 10.;#P comment 271 368 92 196618 \$1 : Id (symbol);#P comment 271 421 71 196618 \$4 : rigidity;#P message 30 513 77 196618 deleteLink \$1;#P comment 264 515 71 196618 Delete a link;#P comment 268 533 124 196618 \$1 : Creation No of link;#P comment 271 368 92 196618 \$1 : Id (symbol);#P comment 271 421 71 196618 \$4 : rigidity;#P comment 271 386 149 196618 \$2 : creation No/Id of mass1;#P comment 271 404 149 196618 \$3 : creation No/Id of mass2;#P comment 266 349 66 196618 Add link(s);#P comment 268 476 160 196618 ($6) : minimum lenght of link;#P comment 268 493 161 196618 ($7) : maximum lenght of link;#P comment 271 439 73 196618 \$5 : damping;#P comment 10 36 288 196618 Creation messages are used to define the structure of the model. Messages create links and masses or destroy them.;#P message 30 349 178 196618 link \$1 \$2 \$3 \$4 \$5 ($6 \$7 \$8);#P comment 271 457 177 196618 \$6 : Power of the rigidity distance;#P user panel 5 80 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 9 521 19;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 143 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 12 166 146 147;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 12 102 81 35;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 316 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 12 340 229 209;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P pop;#P newobj 12 458 131 196617 patcher creation;#P window setfont "Sans Serif" 10.;#P comment 103 546 33 196618 None;#P comment 20 584 42 196618 - Left:;#P comment 101 585 329 196618 Outputs the model parameters asked with the attributes messages.;#P comment 20 629 49 196618 - Right:;#P window linecount 2;#P comment 100 630 363 196618 Outputs information on model when creation messages are send or with the special message [infosL( which dump the complete state of the model.;#P comment 101 421 242 196618 Messages - Different messages are used to control the msd object. They are of three types :;#P window linecount 1;#P comment 9 752 100 196618 CATEGORY: control;#P window setfont "Sans Serif" 9.;#N vpatcher 132 109 678 644;#P window setfont "Sans Serif" 10.;#P window linecount 1;#P comment 193 94 155 196618 Set position of fixed mass(es);#P window setfont "Sans Serif" 12.;#P window linecount 0;#P comment 10 66 62 196620 Masses :;#P comment 9 310 49 196620 Links :;#P comment 10 6 186 196620 DYNAMIC SETTINGS Messages;#P window setfont "Sans Serif" 10.;#P message 34 100 66 196618 posX \$1 \$2;#P comment 193 148 117 196618 Add force on mass(es);#P message 34 156 75 196618 forceX \$1 \$2;#P comment 195 216 59 196618 \$1 : Value;#P comment 196 111 121 196618 \$1 : Id (symbol) or No;#P comment 196 165 121 196618 \$1 : Id (symbol) or No;#P message 34 199 52 196618 Xmin \$1;#P message 34 221 53 196618 Xmax \$1;#P message 34 248 74 196618 setMobile \$1;#P message 34 269 67 196618 setFixed \$1;#P comment 196 129 59 196618 \$2 : Value;#P comment 196 183 59 196618 \$2 : Value;#P comment 192 200 265 196618 Set minimimum and maximum position of all masses;#P comment 191 248 141 196618 Set mass to mobile or fixed;#P message 32 398 65 196618 setD \$1 \$2;#P comment 187 384 82 196618 \$2 : New value;#P message 32 347 65 196618 setK \$1 \$2;#P comment 187 440 82 196618 \$2 : New value;#P comment 187 493 82 196618 \$2 : New value;#P comment 181 348 118 196618 Set rigidity of link(s);#P comment 181 404 120 196618 Set damping of link(s);#P message 32 453 64 196618 setL \$1 \$2;#P comment 181 457 144 196618 Set initial lenght of link(s);#P comment 187 366 121 196618 \$1 : Id (symbol) or No;#P comment 187 422 121 196618 \$1 : Id (symbol) or No;#P comment 187 475 121 196618 \$1 : Id (symbol) or No;#P comment 194 265 121 196618 \$1 : Id (symbol) or No;#P comment 13 29 251 196618 Dynamic settings messages allows the user to redefine internal parameters of links and masses.;#P user panel 5 5 521 19;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 65 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 311 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 19 89 119 208;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 19 337 117 173;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P pop;#P newobj 12 479 131 196617 patcher dynamic settings;#N vpatcher 124 104 668 716;#P window setfont "Sans Serif" 12.;#P comment 9 77 63 196620 General :;#P comment 9 5 147 196620 ATTRIBUTES Messages;#P comment 9 140 48 196620 Lists :;#P window setfont "Sans Serif" 10.;#P message 35 107 40 196618 infosL;#P comment 138 107 239 196618 Get infos on all masses and links on right outlet;#P message 34 173 67 196618 massesPosL;#P message 34 201 82 196618 massesForcesL;#P comment 172 173 253 196618 Output all masses positions in a list on outlet No 1;#P comment 142 308 384 196618 \$1 : Attribute type ( massesPos / massesSpeeds / massesForces / linksPos );#P comment 142 283 209 196618 Get specific attribute on specific element;#P message 22 281 70 196618 get \$1 ($2);#P window setfont "Sans Serif" 12.;#P comment 9 243 66 196620 Specific :;#P window setfont "Sans Serif" 10.;#P comment 142 378 299 196618 The get message return the asked attribute preceded by an identifier and the creation No of the element. The identifier is made of the asked parameter and the way you asked for it.;#P comment 143 454 49 196618 message;#P comment 383 454 53 196618 response;#P comment 142 435 309 196618 Examples with 3 masses numbered 0 \, 1 and 2 and named mas:;#P comment 148 544 254 196618 [get massesPos mas( -----> [massesPosId 0 x0(;#P comment 337 559 107 196618 [massesPosId 2 x2(;#P comment 337 574 107 196618 [massesPosId 1 x1(;#P comment 176 473 223 196618 [get massesPos( -----> [massesPos 0 x0(;#P comment 337 487 98 196618 [massesPos 2 x2(;#P comment 337 501 98 196618 [massesPos 1 x1(;#P comment 162 523 245 196618 [get massesPos 1( -----> [massesPosNo 1 x1(;#P comment 17 33 371 196618 The attributes messages ask the object to output some of his internal parameters. They can be output by lists for positions and forces of masses.;#P comment 172 202 291 196618 Output all forces applied on masses in a list on outlet No 1;#P comment 142 345 247 196618 ($2) : - If not defined all the attributes are send for all the elements. - Ids or/and creations No;#P user panel 5 5 521 19;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 76 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 140 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 5 243 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 10 99 104 37;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 10 167 146 66;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 10 271 116 304;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P pop;#P newobj 12 500 131 196617 patcher attributes;#P window setfont "Sans Serif" 10.;#P comment 9 762 267 196618 KEYWORDS: physical model mass spring damper link;#P comment 306 788 201 196618 - Nicolas Montgermont \, May 12 \, 2005;#P comment 111 730 82 196618 01_msdtest.pd;#P window setfont "Sans Serif" 9.;#P comment 196 216 61 196617 Drag----->;#P user panel 17 394 55 17;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 17 583 55 17;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 17 628 55 17;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P comment 140 789 50 196617 see also:;#P comment 40 205 34 196617 Start;#P user panel 6 369 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 71 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 4 521 38;#X brgb 214 214 214;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 526 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 562 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 728 521 19;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 750 521 31;#X brgb 214 214 214;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P user panel 6 784 522 23;#X brgb 135 163 161;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P background;#P connect 50 0 49 0;#P connect 33 0 51 0;#P connect 35 0 37 0;#P connect 37 0 36 0;#P hidden connect 56 0 55 0;#P hidden connect 57 0 55 0;#P hidden connect 55 0 54 0;#P connect 32 0 31 0;#P connect 31 0 53 0;#P connect 53 0 34 0;#P connect 34 0 52 0;#P pop;